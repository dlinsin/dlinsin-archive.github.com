<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<html>
<head>
  <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
  <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
  <title>David Linsin - 5 Star Rating</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="author" content="David Linsin" />
  <link href="http://dlinsin.github.com/atom.xml" rel="alternate" title="5 Star Rating" type="application/atom+xml" />
</head>

<body>

<a href="http://github.com/dlinsin"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://assets2.github.com/img/5d21241b64dc708fcbb701f68f72f41e9f1fadd6?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_left_red_aa0000.png&path=" alt="Fork me on GitHub"></a>

<div class="site">
  <div class="title">
    <a href="/">Home</a>
  </div>
  
  <link rel="me" type="text/html" href="http://www.google.com/profiles/dlinsin"/>
  
  <div id="post">
  <h1> 5 Star Rating </h1>
  <p class="meta"> 10 January 2011 </p> 
  
<p>A <a href='http://dlinsin.blogspot.com/2010/09/i-think-i-spider.html'>couple of months ago</a> we release our first own App &#8221;<a href='http://mobile.synyx.de/2010/09/i-think-i-spider-1-0-released/'>I think I spider</a>&#8221; at Synyx. It features German quotes and sayings directly translated to English. It doesn&#8217;t make much sense to a none-native German speaker, but believe me it&#8217;s hilarious for us.</p>

<p>The App let&#8217;s you rate those quotes with a 5 star rating, which is directly incorporated into a ranking. Up until today the component in charge of the ranking is a simple bunch of <em>UIImageViews</em> wired up with Interface Builder and set appropriately when tapped. That means if you want to give a 3 star rating, tapping on the 3rd <em>UIImageView</em> would fill up the 2 previous one as well. Same goes for changing your mind and going from a 5 to 3 star rating. The logic would unhighlight the 4th and 5th star.</p>

<p>Now, this works great and it certainly looks beautiful, but have you ever rated an App in the App Store on your iOS device? This is how it looks like:</p>
<object height='385' width='480'><param name='movie' value='http://www.youtube.com/v/cbOll4SWwmU?fs=1&amp;hl=en_US' /><param name='allowFullScreen' value='true' /><param name='allowscriptaccess' value='always' /><embed src='http://www.youtube.com/v/cbOll4SWwmU?fs=1&amp;hl=en_US' allowfullscreen='true' type='application/x-shockwave-flash' allowscriptaccess='always' height='385' width='480' /></object>
<p>Apple did a great job of just getting everything right with this small little control. The way you can slide your finger over it and the stars light up is just great. Also notice that if you want to reset the rating and go down to 0 stars, you need to swipe your finger all the way to the left. Note, that you can also touch slightly below the star, in order to see the stars above your fingers.</p>

<p>All those little details were the requirements for the next version of the rating feature of <a href='http://itunes.apple.com/de/app/i-think-i-spider/id390639989?mt=8'>I think I spider</a>. However, having some spare time over the holidays, I though I&#8217;d write a little component, which does all of that and more: <strong>DLStarRating</strong>. You can find the code on <a href='https://github.com/dlinsin/DLStarRating'>github</a>, along with a sample project of how to use the stuff in your next App.</p>
<object height='385' width='480'><param name='movie' value='http://www.youtube.com/v/0fpeBo2H7Tc?fs=1&amp;hl=en_US' /><param name='allowFullScreen' value='true' /><param name='allowscriptaccess' value='always' /><embed src='http://www.youtube.com/v/0fpeBo2H7Tc?fs=1&amp;hl=en_US' allowfullscreen='true' type='application/x-shockwave-flash' allowscriptaccess='always' height='385' width='480' /></object>
<p><em>DLStarRating</em> consists of a configurable number of custom <em>UIButtons</em> called <em>DLStarView</em>. They have a different background image for their normal and highlighted state. Those buttons are wrapped in a <em>UIControl</em> called <em>DLStarRatingControl</em>, which does all the touch handling. The buttons are centered in the <em>DLStarRatingControl</em> so keep that in mind when configuring its size.</p>

<p>It&#8217;s quite easy to use <em>DLStarRating</em> in your code. You can wire it up in Interface Builder (although you won&#8217;t be able to configure it from there) or in your <em>UIViewController</em> subclass:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>DLStarRatingControl</span> <span class='o'>*</span><span class='nx'>customNumberOfStars</span> <span class='o'>=</span> 
  <span class='p'>[[</span><span class='nx'>DLStarRatingControl</span> <span class='nx'>alloc</span><span class='p'>]</span> <span class='nx'>initWithFrame</span><span class='o'>:</span><span class='nx'>CGRectMake</span><span class='p'>(</span><span class='mi'>0</span><span class='p'>,</span> <span class='mi'>230</span><span class='p'>,</span> <span class='mi'>320</span><span class='p'>,</span> <span class='mi'>230</span><span class='p'>)</span> <span class='nx'>andStars</span><span class='o'>:</span><span class='mi'>3</span><span class='p'>];</span>
<span class='nx'>customNumberOfStars</span><span class='p'>.</span><span class='nx'>backgroundColor</span> <span class='o'>=</span> <span class='p'>[</span><span class='nx'>UIColor</span> <span class='nx'>groupTableViewBackgroundColor</span><span class='p'>];</span>
<span class='nx'>customNumberOfStars</span><span class='p'>.</span><span class='nx'>autoresizingMask</span> <span class='o'>=</span>  <span class='nx'>UIViewAutoresizingFlexibleLeftMargin</span> <span class='o'>|</span> 
                                        <span class='nx'>UIViewAutoresizingFlexibleWidth</span> <span class='o'>|</span> 
                                        <span class='nx'>UIViewAutoresizingFlexibleHeight</span> <span class='o'>|</span> 
                                        <span class='nx'>UIViewAutoresizingFlexibleRightMargin</span> <span class='o'>|</span> 
                                        <span class='nx'>UIViewAutoresizingFlexibleTopMargin</span> <span class='o'>|</span> 
                                        <span class='nx'>UIViewAutoresizingFlexibleBottomMargin</span><span class='p'>;</span>
<span class='nx'>customNumberOfStars</span><span class='p'>.</span><span class='nx'>rating</span> <span class='o'>=</span> <span class='mi'>2</span><span class='p'>;</span>
<span class='p'>[</span><span class='nx'>self</span><span class='p'>.</span><span class='nx'>view</span> <span class='nx'>addSubview</span><span class='o'>:</span><span class='nx'>customNumberOfStars</span><span class='p'>];</span>
</code></pre>
</div><a href='https://gist.github.com/772510' class='gist'>gist</a>
<p>To customize the stars, you can replace <em>star.png</em> and <em>star_highlighted.png</em> in the images folder under <em>DLStarRating</em> with your own. The only requirement is that the two images must have the same size.</p>

<p>If you discover any bugs or have a great idea you want implemented, open an issue on <a href='https://github.com/dlinsin/DLStarRating/issues'>github</a> or fork the project and help me out!</p>

  </div>

  <div class="footer">
    <div class="contact">
      <p>
        mail: dlinsin@gmail.com<br/>
        jabber: dlinsin@gmail.com<br/>
      </p>
    </div>
    <div class="contact">
      <p>
        skype: dlinsin<br/>
        twitter: <a href="http://twitter.com/furryfishApps">furryfishApps</a>
      </p>
    </div>
    <div class="contact">
      <p>
        github: <a href="http://github.com/dlinsin">dlinsin</a><br/>
      </p>
    </div>
  </div>
  
</div>
</body>
</html>